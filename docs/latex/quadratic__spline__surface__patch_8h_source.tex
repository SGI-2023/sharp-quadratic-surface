\doxysection{quadratic\+\_\+spline\+\_\+surface\+\_\+patch.\+h}
\hypertarget{quadratic__spline__surface__patch_8h_source}{}\label{quadratic__spline__surface__patch_8h_source}\index{src/quadratic\_spline\_surface/quadratic\_spline\_surface\_patch.h@{src/quadratic\_spline\_surface/quadratic\_spline\_surface\_patch.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Copyright\ 2023\ Adobe\ Research.\ All\ rights\ reserved.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ To\ view\ a\ copy\ of\ the\ license,\ visit\ LICENSE.md.}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}common.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}convex\_polygon.h"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}evaluate\_surface\_normal.h"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{polynomial__function_8h}{polynomial\_function.h}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}polyscope/point\_cloud.h"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <igl/is\_vertex\_manifold.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_quadratic_spline_surface_patch}{QuadraticSplineSurfacePatch}}}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a21295d4423bffa27f0c205b4891ca570}{QuadraticSplineSurfacePatch}}();}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00039\ \ \ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a21295d4423bffa27f0c205b4891ca570}{QuadraticSplineSurfacePatch}}(\textcolor{keyword}{const}\ Matrix6x3r\&\ surface\_mapping\_coeffs,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_convex_polygon}{ConvexPolygon}}\&\ domain);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00045\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a438288b50de89414b107f29615abc0bb}{dimension}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00050\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a85e45fd65b2ab6dff7d8961c262b5e08}{mark\_cone}}(\textcolor{keywordtype}{int}\ cone\_index);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a1c115c83e75f446629019967d8e32bb7}{has\_cone}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00060\ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a9dad7e95f9e75c5fed6b87b123b0cbd0}{get\_cone}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00065\ \ \ Matrix6x3r\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_aeee2f2bb94e0deef59b2e00631191112}{get\_surface\_mapping}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00070\ \ \ Matrix6x3r\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a968f33e18743cde35a2613dcabd9f550}{get\_normal\_mapping}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00077\ \ \ Matrix6x3r\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a4f7699f81306b3b1cd0982142477547b}{get\_normalized\_surface\_mapping}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00084\ \ \ Matrix6x3r\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a2f10d967cbf1330fdcf4fcc1302bfa06}{get\_bezier\_points}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00090\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a695a46d4016c603219bb9ee8966f2122}{get\_bounding\_box}}(SpatialVector\&\ min\_point,}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SpatialVector\&\ max\_point)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00092\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00093\ \ \ \ \ min\_point\ =\ m\_min\_point;}
\DoxyCodeLine{00094\ \ \ \ \ max\_point\ =\ m\_max\_point;}
\DoxyCodeLine{00095\ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00100\ \ \ SpatialVector\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a9da9644e28c5c508db90aeae5188657f}{get\_bounding\_box\_min\_point}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00101\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_min\_point;}
\DoxyCodeLine{00103\ \ \ \}}
\DoxyCodeLine{00104\ \ \ \textcolor{keywordtype}{double}\ get\_bbox\_x\_min()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_min\_point[0];\ \}}
\DoxyCodeLine{00105\ \ \ \textcolor{keywordtype}{double}\ get\_bbox\_y\_min()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_min\_point[1];\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00110\ \ \ SpatialVector\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a7a24320f584ea7b8cd906707d100b65d}{get\_bounding\_box\_max\_point}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00111\ \textcolor{keyword}{\ \ }\{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_max\_point;}
\DoxyCodeLine{00113\ \ \ \}}
\DoxyCodeLine{00114\ \ \ \textcolor{keywordtype}{double}\ get\_bbox\_x\_max()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_max\_point[0];\ \}}
\DoxyCodeLine{00115\ \ \ \textcolor{keywordtype}{double}\ get\_bbox\_y\_max()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_max\_point[1];\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00120\ \ \ \mbox{\hyperlink{class_convex_polygon}{ConvexPolygon}}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a1b0b8a202f406a34ebae5c359ab19a07}{get\_domain}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00125\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a6d33a7302447ddd8b12c8815841e8d8d}{get\_patch\_boundaries}}(}
\DoxyCodeLine{00126\ \ \ \ \ std::array<\mbox{\hyperlink{class_rational_function}{RationalFunction<4,\ 3>}},\ 3>\&\ patch\_boundaries)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00132\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_af87363b9abd8969c55a9e5b4b556dfa1}{normalize\_patch\_domain}}(}
\DoxyCodeLine{00133\ \ \ \ \ \mbox{\hyperlink{class_quadratic_spline_surface_patch}{QuadraticSplineSurfacePatch}}\&\ normalized\_spline\_surface\_patch)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00140\ \ \ PlanarPoint\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_afb0024f43b442c826c2e8b4c3d81d7a1}{denormalize\_domain\_point}}(}
\DoxyCodeLine{00141\ \ \ \ \ PlanarPoint\&\ normalized\_domain\_point)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a036ad5735e2677bdfe87a74a7f2df7fa}{evaluate}}(\textcolor{keyword}{const}\ PlanarPoint\&\ domain\_point,}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SpatialVector\&\ surface\_point)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00154\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a07271a43a22d3ff1bf32c9ef86e3cb23}{evaluate\_normal}}(\textcolor{keyword}{const}\ PlanarPoint\&\ domain\_point,}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SpatialVector\&\ surface\_normal)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00161\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a7876eeb81236af4498628101ee28259b}{sample}}(\textcolor{keywordtype}{size\_t}\ sampling\_density,}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<SpatialVector>\&\ spline\_surface\_patch\_points)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00170\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a5c5d5d369ca96d4d88dbcb482567e0d3}{triangulate}}(\textcolor{keywordtype}{size\_t}\ num\_refinements,}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eigen::MatrixXd\&\ V,}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eigen::MatrixXi\&\ F,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eigen::MatrixXd\&\ N)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00178\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_aac7c4d6cb7b00097bd35f072c2236a7c}{add\_patch\_to\_viewer}}(std::string\ patch\_name\ =\ \textcolor{stringliteral}{"{}surface\_patch"{}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00181\ \ \ \textcolor{keyword}{friend}\ std::ostream\&\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_afe0fbd0e26b8cdbb91861a71d8284635}{operator<<}}(}
\DoxyCodeLine{00182\ \ \ \ \ std::ostream\&\ out,}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch}{QuadraticSplineSurfacePatch}}\&\ spline\_surface\_patch);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00192\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a47994829e034f7d808a9164308c5cff5}{serialize}}(std::ostream\&\ out)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00197\ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_quadratic_spline_surface_patch_a802bd25d4df0766d2dcf5abce4f710c8}{write\_patch}}(\textcolor{keyword}{const}\ std::string\&\ filename)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00200\ \ \ std::string\ formatted\_patch()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \textcolor{comment}{//\ Core\ independent\ data}}
\DoxyCodeLine{00203\ \ \ Matrix6x3r\ m\_surface\_mapping\_coeffs;}
\DoxyCodeLine{00204\ \ \ \mbox{\hyperlink{class_convex_polygon}{ConvexPolygon}}\ m\_domain;}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \textcolor{comment}{//\ Inferred\ dependent\ data}}
\DoxyCodeLine{00207\ \ \ Matrix6x3r\ m\_normal\_mapping\_coeffs;}
\DoxyCodeLine{00208\ \ \ Matrix6x3r\ m\_normalized\_surface\_mapping\_coeffs;}
\DoxyCodeLine{00209\ \ \ Matrix6x3r\ m\_bezier\_points;}
\DoxyCodeLine{00210\ \ \ SpatialVector\ m\_min\_point;}
\DoxyCodeLine{00211\ \ \ SpatialVector\ m\_max\_point;}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \textcolor{comment}{//\ Additional\ cone\ marker\ to\ handle\ degenerate\ configurations}}
\DoxyCodeLine{00214\ \ \ \textcolor{keywordtype}{int}\ m\_cone\_index;}
\DoxyCodeLine{00215\ \};}

\end{DoxyCode}
