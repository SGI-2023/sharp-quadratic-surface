\doxysection{test\+\_\+convert\+\_\+conic.\+cpp}
\hypertarget{test__convert__conic_8cpp_source}{}\label{test__convert__conic_8cpp_source}\index{src/tests/test\_convert\_conic.cpp@{src/tests/test\_convert\_conic.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}common.h"{}}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <Eigen/Core>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <catch2/catch\_test\_macros.hpp>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}convert\_conic.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ TEST\_CASE(\ \textcolor{stringliteral}{"{}The\ eigen\ decomposition\ of\ the\ identity\ is\ trivial"{}},\ \textcolor{stringliteral}{"{}[parametrize\_contour]"{}}\ )\ \{}
\DoxyCodeLine{00010\ \ \ Matrix2x2r\ A(2,2);}
\DoxyCodeLine{00011\ \ \ A\ <<\ 1,\ 0,}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ 0,\ 1;}
\DoxyCodeLine{00013\ \ \ std::array<double,\ 2>\ eigenvalues;}
\DoxyCodeLine{00014\ \ \ Matrix2x2r\ rotation;}
\DoxyCodeLine{00015\ \ \ compute\_symmetric\_matrix\_eigen\_decomposition(A,\ eigenvalues,\ rotation);}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ REQUIRE(float\_equal(eigenvalues[0],\ 1.0));}
\DoxyCodeLine{00018\ \ \ REQUIRE(float\_equal(eigenvalues[1],\ 1.0));}
\DoxyCodeLine{00019\ \ \ REQUIRE(float\_equal(rotation(0,\ 0),\ 1.0));}
\DoxyCodeLine{00020\ \ \ REQUIRE(float\_equal(rotation(0,\ 1),\ 0.0));}
\DoxyCodeLine{00021\ \ \ REQUIRE(float\_equal(rotation(1,\ 0),\ 0.0));}
\DoxyCodeLine{00022\ \ \ REQUIRE(float\_equal(rotation(1,\ 1),\ 1.0));}
\DoxyCodeLine{00023\ \}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ TEST\_CASE(\ \textcolor{stringliteral}{"{}The\ eigen\ decomposition\ of\ a\ diagonal\ matrix\ is\ trivial"{}},\ \textcolor{stringliteral}{"{}[parametrize\_contour]"{}}\ )\ \{}
\DoxyCodeLine{00026\ \ \ Matrix2x2r\ A(2,2);}
\DoxyCodeLine{00027\ \ \ A\ <<\ 5,\ 0,}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ 0,\ 0.5;}
\DoxyCodeLine{00029\ \ \ std::array<double,\ 2>\ eigenvalues;}
\DoxyCodeLine{00030\ \ \ Matrix2x2r\ rotation;}
\DoxyCodeLine{00031\ \ \ compute\_symmetric\_matrix\_eigen\_decomposition(A,\ eigenvalues,\ rotation);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ REQUIRE(float\_equal(eigenvalues[0],\ 5.0));}
\DoxyCodeLine{00034\ \ \ REQUIRE(float\_equal(eigenvalues[1],\ 0.5));}
\DoxyCodeLine{00035\ \ \ \textcolor{comment}{//\ Not\ generally\ unique}}
\DoxyCodeLine{00036\ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 0),\ 1.0));\ }}
\DoxyCodeLine{00037\ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 1),\ 0.0));}}
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 0),\ 0.0));}}
\DoxyCodeLine{00039\ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 1),\ 1.0));}}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ TEST\_CASE(\ \textcolor{stringliteral}{"{}The\ eigen\ decomposition\ of\ U\string^T\ D\ U\ is\ D,\ U"{}},\ \textcolor{stringliteral}{"{}[parametrize\_contour]"{}}\ )\ \{}
\DoxyCodeLine{00043\ \ \ Matrix2x2r\ D(2,2);}
\DoxyCodeLine{00044\ \ \ Matrix2x2r\ U(2,2);}
\DoxyCodeLine{00045\ \ \ Matrix2x2r\ A(2,2);}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ SECTION(\textcolor{stringliteral}{"{}Singular\ values\ (5,\ 0.5),\ rotation\ angle\ 0.1"{}})\ \{}
\DoxyCodeLine{00048\ \ \ \ \ D\ <<\ 5,\ 0,\ 0,\ 0.5;}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{double}\ theta\ =\ 0.1;}
\DoxyCodeLine{00050\ \ \ \ \ U\ <<\ std::cos(theta),\ -\/std::sin(theta),\ std::sin(theta),\ std::cos(theta);}
\DoxyCodeLine{00051\ \ \ \ \ A\ =\ U.transpose()\ *\ D\ *\ U;}
\DoxyCodeLine{00052\ \ \ \ \ std::array<double,\ 2>\ eigenvalues;}
\DoxyCodeLine{00053\ \ \ \ \ Matrix2x2r\ rotation;}
\DoxyCodeLine{00054\ \ \ \ \ compute\_symmetric\_matrix\_eigen\_decomposition(A,\ eigenvalues,\ rotation);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ spdlog::set\_level(spdlog::level::debug);}
\DoxyCodeLine{00057\ \ \ \ \ spdlog::debug(\textcolor{stringliteral}{"{}Expected\ rotation\ is\ \{\}"{}},\ U);}
\DoxyCodeLine{00058\ \ \ \ \ spdlog::debug(\textcolor{stringliteral}{"{}Computed\ rotation\ is\ \{\}"{}},\ rotation);}
\DoxyCodeLine{00059\ \ \ \ \ REQUIRE(float\_equal(eigenvalues[0],\ 5.0));}
\DoxyCodeLine{00060\ \ \ \ \ REQUIRE(float\_equal(eigenvalues[1],\ 0.5));}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Not\ generally\ unique}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 0),\ U(0,\ 0)));}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 1),\ U(0,\ 1)));}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 0),\ U(1,\ 0)));}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 1),\ U(1,\ 1)));}}
\DoxyCodeLine{00066\ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ SECTION(\textcolor{stringliteral}{"{}Singular\ values\ (-\/5,\ -\/0.5),\ rotation\ angle\ 1"{}})\ \{}
\DoxyCodeLine{00069\ \ \ \ \ D\ <<\ -\/5,\ 0,\ 0,\ -\/0.5;}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{double}\ theta\ =\ 1;}
\DoxyCodeLine{00071\ \ \ \ \ U\ <<\ std::cos(theta),\ -\/std::sin(theta),\ std::sin(theta),\ std::cos(theta);}
\DoxyCodeLine{00072\ \ \ \ \ A\ =\ U.transpose()\ *\ D\ *\ U;}
\DoxyCodeLine{00073\ \ \ \ \ std::array<double,\ 2>\ eigenvalues;}
\DoxyCodeLine{00074\ \ \ \ \ Matrix2x2r\ rotation;}
\DoxyCodeLine{00075\ \ \ \ \ compute\_symmetric\_matrix\_eigen\_decomposition(A,\ eigenvalues,\ rotation);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Expected\ rotation\ is\ \{\}"{}},\ U);}
\DoxyCodeLine{00078\ \ \ \ \ SPDLOG\_DEBUG(\textcolor{stringliteral}{"{}Computed\ rotation\ is\ \{\}"{}},\ rotation);}
\DoxyCodeLine{00079\ \ \ \ \ REQUIRE(float\_equal(eigenvalues[0],\ -\/0.5));}
\DoxyCodeLine{00080\ \ \ \ \ REQUIRE(float\_equal(eigenvalues[1],\ -\/5.0));}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ Not\ generally\ unique}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 0),\ U(0,\ 1)));}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 0),\ U(1,\ 1)));}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(0,\ 1),\ -\/U(1,\ 1)));}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//REQUIRE(float\_equal(rotation(1,\ 1),\ U(0,\ 1)));}}
\DoxyCodeLine{00086\ \ \ \}}
\DoxyCodeLine{00087\ \}}

\end{DoxyCode}
